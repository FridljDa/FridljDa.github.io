@import "tailwindcss";

@variant dark (.dark &);

@theme {
  --color-primary-50: #e3f2fd;
  --color-primary-100: #bbdefb;
  --color-primary-200: #90caf9;
  --color-primary-300: #64b5f6;
  --color-primary-400: #42a5f5;
  --color-primary-500: #2196f3;
  --color-primary-600: #1e88e5;
  --color-primary-700: #1976d2;
  --color-primary-800: #1565c0;
  --color-primary-900: #0d47a1;
}

@layer base {
  html {
    scroll-behavior: smooth;
  }
  
  body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }
}

@layer components {
  /* GitHub-style heading links: entire heading wrapped in anchor */
  .heading-link {
    color: inherit !important;
    text-decoration: none !important;
    position: relative;
  }
  
  /* On hover, underline the heading */
  .heading-link:hover {
    text-decoration: underline !important;
  }
  
  /* Override any prose link styles for heading links */
  .prose :is(h1, h2, h3, h4, h5, h6) > .heading-link {
    color: inherit !important;
    text-decoration: none !important;
  }
  
  .prose :is(h1, h2, h3, h4, h5, h6) > .heading-link:hover {
    text-decoration: underline !important;
  }
  
  /* Icon using ::after pseudo-element with SVG */
  :root {
    --heading-link-icon: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0 1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');
  }
  .heading-link::after {
    content: var(--heading-link-icon);
    display: inline-block;
    margin-left: 0.5rem;
    vertical-align: middle;
    opacity: 0;
    transition: opacity 0.2s;
  }
  
  /* Icon appears on hover */
  .heading-link:hover::after {
    opacity: 1;
  }
  
  /* Ensure headings maintain normal styling with proper spacing */
  .prose h1 {
    @apply text-gray-900 dark:text-white font-bold text-4xl mt-0;
  }
  
  .prose h2 {
    @apply text-gray-900 dark:text-white font-bold text-3xl mt-12;
  }
  
  .prose h3 {
    @apply text-gray-900 dark:text-white font-bold text-2xl mt-10;
  }
  
  .prose h4 {
    @apply text-gray-900 dark:text-white font-bold text-xl mt-8;
  }
  
  .prose h5,
  .prose h6 {
    @apply text-gray-900 dark:text-white font-bold text-lg mt-8;
  }
  
  /* Headings wrapped in anchor should inherit heading color, not link color */
  .prose :is(h1, h2, h3, h4, h5, h6) .heading-link {
    @apply text-inherit font-bold;
  }
  
  .prose {
    @apply text-gray-700 dark:text-gray-300;
  }
  
  /* Regular links in prose (not heading links) */
  .prose a:not(.heading-link) {
    @apply text-primary-600 dark:text-primary-400 hover:underline;
  }
  
  /* Image styling */
  .prose img {
    @apply rounded-lg my-4;
  }
  
  .prose figure {
    @apply my-6;
  }
  
  /* Code block styling */
  .prose code {
    @apply bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm;
  }
  
  .prose pre {
    @apply bg-gray-100 dark:bg-gray-800 rounded-lg p-4 overflow-x-auto;
  }
  
  .prose pre code {
    @apply bg-transparent p-0;
  }
  
  /* Table of Contents styles */
  .toc-container {
    @apply hidden lg:block;
  }
  
  .toc-sidebar {
    @apply sticky top-20 max-h-[calc(100vh-5rem)] overflow-y-auto pb-4;
    scrollbar-width: thin;
    scrollbar-color: rgb(209 213 219) transparent;
  }
  
  .toc-sidebar::-webkit-scrollbar {
    width: 6px;
  }
  
  .toc-sidebar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .toc-sidebar::-webkit-scrollbar-thumb {
    background-color: rgb(209 213 219);
    border-radius: 3px;
  }
  
  .dark .toc-sidebar::-webkit-scrollbar-thumb {
    background-color: rgb(55 65 81);
  }
  
  .toc-list {
    @apply space-y-1 text-sm list-none;
  }
  
  .toc-item {
    @apply block py-1.5 px-3 rounded transition-colors text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white;
    text-decoration: none;
  }
  
  .toc-item:hover {
    @apply bg-gray-100 dark:bg-gray-800;
  }
  
  .toc-item.active {
    @apply bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 font-medium;
  }
  
  .toc-item-level-2 {
    @apply pl-3;
  }
  
  .toc-item-level-3 {
    @apply pl-6;
  }
  
  .toc-item-level-4 {
    @apply pl-9;
  }
  
  .toc-title {
    @apply text-xs font-semibold text-gray-900 dark:text-white mb-4 uppercase tracking-wider;
  }
}

@layer utilities {
  /* Background utilities */
  .bg-surface {
    @apply bg-white dark:bg-gray-900;
  }
  
  .bg-surface-alt {
    @apply bg-gray-50 dark:bg-gray-800;
  }
  
  .bg-surface-elevated {
    @apply bg-gray-100 dark:bg-gray-800;
  }
  
  /* Text utilities */
  .text-heading {
    @apply text-gray-900 dark:text-white;
  }
  
  .text-body {
    @apply text-gray-700 dark:text-gray-300;
  }
  
  .text-muted {
    @apply text-gray-600 dark:text-gray-400;
  }
  
  .text-subtle {
    @apply text-gray-500 dark:text-gray-500;
  }
  
  .placeholder-text-subtle::placeholder {
    @apply text-gray-500 dark:text-gray-400;
  }
  
  /* Border utilities */
  .border-surface {
    @apply border-gray-200 dark:border-gray-700;
  }
  
  .border-input {
    @apply border-gray-300 dark:border-gray-600;
  }
  
  /* Link utilities */
  .text-link {
    @apply text-primary-600 dark:text-primary-400;
  }
  
  .text-link-hover {
    @apply text-primary-600 dark:text-primary-400 hover:underline;
  }
  
  /* Button utilities */
  .btn-secondary {
    @apply bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white;
  }
  
  .btn-secondary-hover {
    @apply bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors;
  }
  
  /* Mobile centering utilities - centered on mobile, left-aligned on desktop */
  .text-mobile-center {
    @apply text-center md:text-left;
  }
  
  .justify-mobile-center {
    @apply justify-center md:justify-start;
  }
  
  .mx-mobile-auto {
    @apply mx-auto md:mx-0;
  }
  
  .items-mobile-center {
    @apply items-center md:items-start;
  }
}

